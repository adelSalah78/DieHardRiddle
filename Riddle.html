<html>
<head>

</head>
<body>
<div id="largeJug" style="width: 50px; float:right; height:60px; margin:300px; margin-top: 5px;">
21&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
20&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
19&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
18&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
17&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
16&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
15&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
14&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
13&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
12&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
11&nbsp;&nbsp;<div style="margin-left: 1px;height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
10&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
 &nbsp;&nbsp;9&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;8&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;7&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;6&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;5&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;4&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;3&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;2&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;1&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;  border-bottom: 2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>

<br/>
<input id="fillLargeJug" type="button" value="Fill" onclick="largeJugJS.fill()"/><br/><br/>
<input id="purgeLargeJug" type="button" value="Purge" onclick="largeJugJS.purge()"/><br/><br/>
<input id="fillOtherLargeJug" type="button" value="Fill To Other" onclick="largeJugJS.fillOtherJug()"/>
</div>

<div id="smallJug" style="width: 50px; float:left; height:60px; margin:270px; margin-top: 150px;">
13&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
12&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
11&nbsp;&nbsp;<div style="margin-left: 1px;height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
10&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
 &nbsp;&nbsp;9&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;8&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;7&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;6&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;5&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;4&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;3&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;2&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>
&nbsp;&nbsp;1&nbsp;&nbsp;<div style="height: 4px; display:inline;  border-right:  2px solid black;border-left:   2px solid black;  border-bottom: 2px solid black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><br/>

<br/>
<input type="button" value="Fill" onclick="smallJugJS.fill()"/><br/><br/>
<input type="button" value="Purge" onclick="smallJugJS.purge()"/><br/><br/>
<input id="fillOtherSmallJug" type="button" value="Fill To Other" onclick="smallJugJS.fillOtherJug()"/>
</div>


<br/><br/><br/><br/>
<button style="margin-top:500px" onclick="checkWinningCondition()">Check</button>


<script type="text/javascript">

var _21GallonJug = function(){
	this.filledSize= 0;
	
	this.fill =  function(){
		this.filledSize = 21;
		var largeJugPortions = document.getElementById('largeJug').childNodes;
		for(var i=0;i<largeJugPortions.length;i++) {
			if(largeJugPortions[i].tagName === 'DIV') {
				largeJugPortions[i].style.backgroundColor = 'blue';
			}
		}
	};
	
	this.purge = function(){
		this.filledSize = 0;
		var largeJugPortions = document.getElementById('largeJug').childNodes;
		for(var i=0;i<largeJugPortions.length;i++) {
			if(largeJugPortions[i].tagName === 'DIV') {
				largeJugPortions[i].style.backgroundColor = 'white';
			}
		}
	}
	
	
	this.fillOtherJug = function() {
		var newResult = parseInt(this.filledSize) + parseInt(smallJugJS.filledSize);
		if(newResult > 13) {
			//alert('can not fill the other jug, capacity exceeded!');
			this.filledSize -= (13 - parseInt(smallJugJS.filledSize));
			smallJugJS.fill();
			drawJugBetweenTransfer(largeJugJS,'largeJug');
			return;
		}
		
		smallJugJS.purge();
		smallJugJS.filledSize = newResult;
		var smallJugPortions = document.getElementById('smallJug').childNodes;
		var i=smallJugPortions.length-1;
		var looper = 0;
		while(looper<newResult) {
			if(smallJugPortions[i].tagName === 'DIV') {
				smallJugPortions[i].style.backgroundColor = 'blue';
				looper++;
			}
			i--;
		}
		this.purge();		
	}
	
};

var _13GallonJug = function(){
	this.filledSize= 0;
	
	this.fill =  function(){
		this.filledSize = 13;
		var smallJugPortions = document.getElementById('smallJug').childNodes;
		for(var i=0;i<smallJugPortions.length;i++) {
			if(smallJugPortions[i].tagName === 'DIV') {
				smallJugPortions[i].style.backgroundColor = 'blue';
			}
		}
	};
	
	this.purge = function(){
		this.filledSize = 0;
		var smallJugPortions = document.getElementById('smallJug').childNodes;
		for(var i=0;i<smallJugPortions.length;i++) {
			if(smallJugPortions[i].tagName === 'DIV') {
				smallJugPortions[i].style.backgroundColor = 'white';
			}
		}
	}
	
	this.fillOtherJug = function() {
		var newResult = parseInt(this.filledSize) + parseInt(largeJugJS.filledSize);
		if(newResult > 21) {
			//alert('can not fill the other jug, capacity exceeded!');
			this.filledSize -= (21 - parseInt(largeJugJS.filledSize));
			largeJugJS.fill();
			drawJugBetweenTransfer(smallJugJS,'smallJug');
			return;
		}
		
		largeJugJS.purge();
		largeJugJS.filledSize = newResult;
		var largeJugPortions = document.getElementById('largeJug').childNodes;
		var i=largeJugPortions.length-1;
		var looper = 0;
		while(looper<newResult) {
			if(largeJugPortions[i].tagName === 'DIV') {
				largeJugPortions[i].style.backgroundColor = 'blue';
				looper++;
			}
			i--;
		}
		this.purge();
	}
}

var largeJugJS = new _21GallonJug();
var smallJugJS = new _13GallonJug();

function drawJugBetweenTransfer(Jug,ID) {
		var JugPortions = document.getElementById(ID).childNodes;
		var jugFilledSize = Jug.filledSize;
		Jug.purge();
		var looper = JugPortions.length - 1;
		var index = 0;
		while(looper>=0) {
			if(JugPortions[looper].tagName === 'DIV') {
				if(index<jugFilledSize) {
					JugPortions[looper].style.backgroundColor = 'blue';
				}
				else
					break;
				index++;
			}
			looper--;
		}
		Jug.filledSize = jugFilledSize;
}

function checkWinningCondition(){
	 if(largeJugJS.filledSize === 20) {
		alert("Congratulations! You did it");
		document.body.setAttribute("style", "background-image: url('win.gif');background-repeat: no-repeat;background-size: 388px 388px;background-position: center;");
		var allInputs = document.getElementsByTagName('input');
		for(var i=0;i<allInputs.length;i++) {
			allInputs[i].disabled = true;
		}
	 }
	 else {
		alert("try harder");
	 }
}

</script>
</body>
</html>